from transformers import T5Tokenizer, T5ForConditionalGeneration

def summarize_text(text, model_name="cahya/t5-base-indonesian-summarization-cased", 
                   min_length=50, max_length=150):
    try:
        # Memuat tokenizer dan model
        tokenizer = T5Tokenizer.from_pretrained(model_name)
        model = T5ForConditionalGeneration.from_pretrained(model_name)
        
        # Mengubah teks menjadi token
        input_ids = tokenizer.encode(text, return_tensors="pt", max_length=512, truncation=True)
        
        # Menghasilkan ringkasan
        summary_ids = model.generate(
            input_ids,
            min_length=min_length,
            max_length=max_length,
            num_beams=10,
            repetition_penalty=2.5,
            length_penalty=1.0,
            early_stopping=True,
            no_repeat_ngram_size=2,
            do_sample=True,
            temperature=0.8,
            top_k=50,
            top_p=0.95
        )
        
        # Mendekode ringkasan ke dalam teks
        summary_text = tokenizer.decode(summary_ids[0], skip_special_tokens=True)
        return summary_text
    except Exception as e:
        return f"Terjadi kesalahan: {str(e)}"

# Contoh penggunaan fungsi
# text_cleaned = """
# Pasangan Cagub-Cawagub Jakarta nomor urut 3, Pramono Anung-Rano Karno mendeklarasikan kemenangan di Pilkada Jakarta 2024. Hal itu dilakukan setelah mempelajari hasil real count KPUD DKI Jakarta berdasarkan perhitungan formulir C hasil KWK di seluruh daerah pemilihan Jakarta. Adapun, hasilnya menunjukkan pasangan Pramono-Rano mendapatkan 2.183.577 suara atau 50,07 persen.  "Alhamdulillah hasil real account KPUD DKI Jakarta dan perhitungan formulir C hasil KWK saat ini, pagi ini, Kamis 28 November 2024 telah mencapai 100 persen TPS di seluruh daerah pemilihan Jakarta dengan menunjukkan hasil bagi pasangan nomor 03 yaitu 2.183.577 suara atau 50,07 persen," kata Pramono saat konferensi pers, Kamis (28/11/2024).  "Untuk itu kami bisa menyampaikan, mendeklarasikan bahwa pasangan calon nomor 03 Mas Pram dan Bang Doel telah memenangkan konsultasi Pilgub DKI Jakarta dalam satu putaran dengan perolehan 50,07 persen," sambungnya.  Pramono mengatakan hasil ini sudah sesuai dengan ketentuan Undang-Undang nomor 29 tahun 2007 dan juga dengan Undang-Undang DKJ (Daerah Khusus Jakarta) nomor 2 tahun 2024. Di mana Gubernur dan Wakil Gubernur DKJ dipilih secara langsung melalui Pilkada dengan perolehan 50 persen plus 1 suara sah.  Mantan Sekretaris Kabinet ini pun berterima kasih kepada seluruh warga Jakarta yang telah menyalurkan hak pilihnya, khususnya kepada pemilih pasangan Pramono-Rano.  "Alhamdulillah dengan penuh rasa syukur dan rasa terima kasih mendalam kepada seluruh warga Jakarta yang telah memberikan hak pilihnya," ujar dia.  Meski begitu, Pramono menyatakan akan tetap menunggu pengumuman resmi hasil rekapitulasi manual Pilgub Jakarta 2024 dari KPU Provinsi DKI Jakarta.  Sementara itu, Ketua Tim Pemenangan Pasangan Cagub-Cawagub Jakarta nomor urut 1 Ridwan Kamil-Suswono (RIDO) Ahmad Riza Patria (Ariza) mengungkapkan, hasil real count yang dilakukan oleh internalnya menunjukkan Pilkada Jakarta harus berlanjut hingga dua putaran. Sebab belum ada kandidat yang meraih suara 50 persen plus 1.  "Paslon nomor urut 1 memperoleh suara 40,17 persen dengan perolehan suara 1.748.714. Paslon nomor 2 10,55 persen dengan peroleh suara 459.475," kata Riza di Kantor DPD Golkar, Jakarta Pusat, Kamis dini hari (28/11/2024).  "Kemudian paslon nomor urut 3 dengan perolehan 2.145.494 dengan perolehan 49 persen atau 49,28 persen, data masuk sudah mencapai 99,9 persen" imbuhnya.  Berdasarkan data yang masuk dan hasil Form C-1 yang terinput, Ariza berujar bahwa Pilkada Jakarta 2024 akan terjadi dua putaran.  "Dengan ini kami menyampaikan hasil input data yang kami terima menyatakan bahwa Pilkada Serentak 2024 di DKI Jakarta akan berlangsung dua putaran," ujar Ariza.  Secara terpisah, Ketua Harian DPP Partai Gerindra Sufmi Dasco Ahmad menyebut, tim pemenangan Ridwan Kamil-Suswono (RIDO) tengah menyiapkan strategi untuk menang di putaran kedua Pilkada Jakarta 2024.  "Strategi-strategi (pemenangan di putaran kedua) itu akan dirumuskan oleh tim pemenangan yang tentunya setelah mengevaluasi hasil-hasil kerja pada saat kemarin," ujar Dasco dalam keterangan tertulis yang diterima, Kamis (28/11/2024).  Ketua Dewan Pembina Tim Pemenangan RIDO ini mengatakan, pihaknya juga tengah menunggu hasil perhitungan atau real count dari KPU Jakarta.  Menurut Dasco, langkah itu dilakukan setelah Ketua Tim Pemenangan RIDO Ahmad Riza Patria (Ariza), menyatakan dari hasil hitungan internal RIDO, Pilkada Jakarta dua putaran.  "Ya jadi kalau Pilkada Jakarta kami juga sedang menunggu perhitungan real count dari KPU walaupun kemudian di internal sudah diumumkan oleh ketua tim dari paslon RIDO, Pak Ariza Patria sudah mengumumkan bahwa untuk perhitungan internal yang dihitung itu kemungkinan besar akan terjadi dua putaran," tandas Dasco.  PDIP Siap Adu Data  Bendahara Tim Pemenangan Pramono-Rano, Charles Honoris menyatakan, pihaknya siap menunjukkan data-data yang menyatakan pasangan nomor urut 3 itu menang satu putaran di Pilkada Jakarta 2024.  "Iya, siap adu data dan semakin hari, selama perjalanan proses penghitungan rekapitulasi, saya yakin akan semakin terang benderang bahwa pilkada ini hanya akan berjalan selama satu putaran saja," kata Charles di Kecamatan Tamansari, Jakarta Barat pada Jumat (29/11/2024).  Charles mengatakan, tim kampanye Pramono Anung-Rano Karno telah mengantongi hasil C-1. Bahkan, hasil C-1 juga sudah di-upload oleh KPU melalui aplikasi Sistem Informasi Rekapitulasi Elektronik (Sirekap).  Dia menambahkan, kedua data telah disinkronisasikan. Hasilnya, pasangan Pramono Anung-Rano Karno mendapatkan perolehan suara 50,07 persen. Oleh karena itu, Pramono-Rano menang dalam Pilkada Jakarta 2024 dalam satu putaran.  "Kenapa kami yakin bahwa pilkada sudah selesai, bahwa pilkada dilakukan hanya ada satu putaran, karena kami melakukan tabulasi melalui data C1. Baik yang fisik yang kami miliki maupun yang sudah di-upload oleh KPU di situs Sirekap," ujar Charles.  "Kan enggak mungkin C1 yang di-upload oleh KPU itu salah, gitu kan," Charles menegaskan.  Sementara itu, Sekjen PDIP Hasto Kristiyanto menyoroti hasil hitung cepat atau quick count Pilkada Jakarta 2024 yang menunjukkan Pramono-Rano memperoleh suara 50 persen lebih. Hasto menegaskan, apabila penghitungan suara berlangsung jujur, maka paslon nomor urut 3 itu dipastikan akan menang dalam satu putaran saja.  “Kami tetap meyakini Mas Pram-Rano Karno satu putaran itu kalau fair, itu kalau jujur dan seluruh simpatisan masyarakat Jakarta mari kita kawal agar ini benar-benar satu putaran,” kata Hasto di TPS 024, Kebagusan, Jakarta Selatan, Rabu (27/11/2024).  Bahkan, menurut Hasto, hasil penghitungan exit poll dan quick count internal menyebutkan Pramono Anung-Rano Karno menang satu putaran di Pilkada Jakarta dengan raihan 53 persen.  “Di Jakarta kami melihat bahwa dari hasil exit poll dan juga quick count yang dilakukan di internal partai menunjukkan pasangan Pramono Anung-Rano Karno unggul dan memenangkan satu putaran,” kata dia.  Hasto meminta seluruh relawan tetap waspada karena ada indikasi dan manuver yang bergerak agar Pilkada Jakarta berlanjut ke putaran kedua.  “Untuk itu seluruh relawan simpatisan anggota dan kader partai agar waspada, karena ada pihak-pihak tertentu yang mencoba memaksakan di Jakarta agar dua putaran,” kata Sekjen PDIP.  Tunggu Hasil Resmi KPU  Ketua Komisi Pemilihan Umum (KPU) DKI Jakarta, Wahyu Dinata angkat suara soal klaim dari dua kubu kandidat Pilgub Jakarta, yakni Ridwan Kamil-Suswono dan Pramono Anung-Rano Karno.  Menurut Wahyu, saat ini belum bisa ditentukan apakah Pilkada Jakarta berlangsung satu atau dua putaran, sebab hasil resmi dari KPU harus menunggu rekapitulasi berjenjang.  "Ya kami juga monitor di media sebenarnya ya, setiap paslon itu pasti di kata akhirnya menunggu rekapitulasi akhir dari KPU. Jadi walaupun ada yang mengklaim, ada yang menyatakan satu putaran, dua putaran, mereka tetap menunggu hasil resmi dari KPU," kata Wahyu di Kantor KPU DKI Jakarta, Kamis (28/11/2024).  Terkait adanya hasil hitung cepat yang dilakukan sejumlah lembaga survei, Wahyu mewanti hasil resmi hanya yang dikeluarkan oleh KPU. Maka dari itu, jika ada yang sudah menyampaikan maka hal itu menjadi hak masing-masing dan KPU tidak terlibat di dalamnya.  “Mengenai hasil yang sudah diumumkan oleh pasangan calon tertentu, menurut kami itu hak pasangan calon ya, untuk menyampaikan informasi-informasi yang mereka punya, tapi kami tetap berpegang bahwa hasil resmi itu hanya yang dikeluarkan oleh KPU,” jelas Wahyu.  “Jadi kalaupun nanti ada pasangan calon satu, dua, dan tiga, mempunyai versi mereka masing-masing, tentu saja versi yang valid itu adalah versi dari KPU. Maka harap besabar ya,” imbuh dia menandasi.  Sementara itu, Cagub Jakarta nomor urut 1 Ridwan Kamil (RK) mengaku bakal menerima apapun hasil final Pilkada Jakarta dari KPU. Dia juga mengajak pendukung untuk bersabar menanti keputusan resmi KPU Jakarta.  “Mari kita menunggu keputusan resmi dari KPU dengan seksama. Jika hasilnya sudah final dan mengikat, pasangan RIDO akan menerima dengan baik. Sambil menunggu keputusan final KPU, semua unsur pendukung RIDO harus tetap dan terus semangat," kata RK dalam keterangan tertulis, Jumat (29/11/2024).  Dia mengucapkan terima kasih kepada semua pemangku kepentingan yang menyukseskan perhelatan Pilkada Jakarta 2024. Menurutnya, Pilkada Jakarta 2024 telah dihelat dengan baik dan sesuai aturan.  "Saya pribadi menghaturkan terima kasih kepada seluruh warga Jakarta yang sudah berkenan menitipkan dan mempercayakan pembangunan masa depan Jakarta kepada pasangan Ridwan Kamil-Suswono (RIDO)," kata dia.  Tak lupa, mantan gubernur Jawa Barat itu juga mengucapkan terima kasih kepada para relawan, partai pengusung, pendukung, tokoh agama dan tokoh masyarakat yang telah berjuang dalam memenangkan pasangan RIDO. 
# """
summary = summarize_text(cleaned_text)
print(summary)
